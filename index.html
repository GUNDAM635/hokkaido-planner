<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Family Trip to TOKYO 2026</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    
    <script>
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    'snow-white': '#F0FFFF',         // 雪白色/極淺藍
                    'ice-blue': '#B3E5FC',           // 冰川藍
                    'light-snow-blue': '#E5F3F7',    // 整個頁面柔和淺藍底色
                    'deep-sea-blue': '#01579B',      // 深海藍 (文字/強調)
                    'accent-yellow': '#FFD54F',      // 溫暖黃 (按鈕/點綴)
                    'soft-gray': '#F5F5F5'           // 背景灰
                }
            }
        }
    }
</script>

<script>
    // 引入 Vue 必要的函式
    const { createApp, reactive, computed, ref, onMounted } = Vue;

    // --- 【資料持久化函式】 ---
    const ITINERARY_KEY = 'hokkaido_itinerary_2026';
    const SHOPPING_KEY = 'hokkaido_shopping_2026';
    const EXPENSES_KEY = 'hokkaido_expenses_2026';

    function saveData(key, data) {
        try {
            localStorage.setItem(key, JSON.stringify(data));
        } catch (e) {
            console.error("Error saving to localStorage", e);
        }
    }

    function loadData(key, defaultData) {
        try {
            const storedData = localStorage.getItem(key);
            if (storedData) {
                return JSON.parse(storedData);
            }
        } catch (e) {
            console.error("Error loading from localStorage", e);
        }
        return defaultData;
    }

    // --- 【預設行程資料】 ---
    // 我假設這是您程式碼中原有的初始資料。
    // 如果 localStorage 中沒有資料，將會載入這個預設資料。
    const DEFAULT_ITINERARY = [
        // Day 1: 2/1 (五)
        { id: 1, day: 1, category: 'transport', name: '抵達新千歲機場 (CTS)', address: '新千歲機場', startTime: '13:15', isNoteExpanded: false, travelTime: null, transportType: null },
        { id: 2, day: 1, category: 'transport', name: '新千歲-札幌 (JR)', address: 'JR 新千歲空港站', startTime: '14:00', price: '¥1,150', note: '搭乘快速 Airport 號至札幌站。', isNoteExpanded: false, travelTime: '約 37 分鐘', transportType: 'train' },
        { id: 3, day: 1, category: 'stay', name: 'Check-in: 札幌大倉飯店', address: '北海道札幌市中央区南1条西5丁目', startTime: '16:00', isNoteExpanded: false, hours: null, price: null, travelTime: '步行 5 分鐘', transportType: 'walk' },
        { id: 4, day: 1, category: 'food', name: '晚餐：湯咖哩 SAMURAI', address: '札幌市中央区南3条西6丁目', startTime: '19:00', note: '招牌雞肉蔬菜，辣度選 3-4。', isNoteExpanded: false, hours: '11:30–22:00', price: null, travelTime: '步行 10 分鐘', transportType: 'walk' },
        // Day 2: 2/2 (六)
        { id: 5, day: 2, category: 'other', name: '租車取車：Nissan 札幌站南口', address: 'Nissan Rent a Car Sapporo Station South Exit Asty', startTime: '08:00', isNoteExpanded: false, hours: '08:00-20:00', price: null, travelTime: '步行 5 分鐘', transportType: 'walk' },
        { id: 6, day: 2, category: 'attraction', name: '札幌雪祭 (大通會場)', address: '札幌市中央区大通西1丁目～西12丁目', startTime: '10:00', isNoteExpanded: false, travelTime: '開車 5 分鐘', transportType: 'car' },
        { id: 7, day: 2, category: 'food', name: '午餐：札幌拉麵共和國', address: '札幌市中央区北5条西2丁目 (ESTA 10F)', startTime: '12:30', isNoteExpanded: false, travelTime: '開車 10 分鐘', transportType: 'car' },
        { id: 8, day: 2, category: 'attraction', name: '白色戀人公園', address: '札幌市西区宮の沢2条2丁目11-36', startTime: '15:00', price: '¥800/人', isNoteExpanded: false, travelTime: '開車 20 分鐘', transportType: 'car' },
        { id: 9, day: 2, category: 'stay', name: 'Check-in: 小樽運河前飯店', address: '小樽市港町5-3', startTime: '18:30', isNoteExpanded: false, travelTime: '開車 40 分鐘', transportType: 'car' },
    ];
    
    // --- 【預設其他資料】 ---
    const DEFAULT_SHOPPING = [
        { name: '六花亭酒糖', image: null },
        { name: '薯條三兄弟 (機場)', image: null },
        { name: '白色戀人餅乾', image: null }
    ];

    const DEFAULT_EXPENSES = [
        { name: '機場快線 JR 票', amount: 1150 * 4, date: '2026-02-01', category: 'transport', payment: 'cash' },
        { name: '湯咖哩晚餐', amount: 5500, date: '2026-02-01', category: 'food', payment: 'cash' },
        { name: '租車四日費用', amount: 35000, date: '2026-02-02', category: 'transport', payment: 'card' },
    ];
    

    // Vue App
    const App = {
        setup() {
            const { ref, reactive, computed, onMounted } = Vue;

            // --- 【主狀態】 ---
            const currentTab = ref('itinerary');
            
            // 使用 loadData 載入，如果沒有就使用預設資料
            const plan = reactive(loadData(ITINERARY_KEY, DEFAULT_ITINERARY));
            const shoppingList = reactive(loadData(SHOPPING_KEY, DEFAULT_SHOPPING));
            const expenses = reactive(loadData(EXPENSES_KEY, DEFAULT_EXPENSES));


            // 載入後要確保 isNoteExpanded 屬性存在
            // (這個屬性不應該存入 localStorage，因為它只是控制顯示狀態)
            plan.forEach(item => {
                if (item.isNoteExpanded === undefined) {
                    item.isNoteExpanded = false;
                }
            });


            // --- 【行程頁狀態】 ---
            const dates = [
                { weekday: '五', date: '2/1', hasCar: false, tollFee: 0 },
                { weekday: '六', date: '2/2', hasCar: true, tollFee: 500 },
                { weekday: '日', date: '2/3', hasCar: true, tollFee: 1200 },
                { weekday: '一', date: '2/4', hasCar: true, tollFee: 0 },
                { weekday: '二', date: '2/5', hasCar: true, tollFee: 2800 },
                { weekday: '三', date: '2/6', hasCar: true, tollFee: 0 },
                { weekday: '四', date: '2/7', hasCar: false, tollFee: 0 },
            ];
            const selectedDateIndex = ref(0); // 預設第一天

            const weatherData = [
                { condition: 'snow', temp: '-2/5', feel: '1', wind: '2.5', humidity: '70' },
                { condition: 'cloudy', temp: '0/8', feel: '4', wind: '1.8', humidity: '65' },
                { condition: 'sunny', temp: '1/9', feel: '5', wind: '2.0', humidity: '60' },
                { condition: 'snow', temp: '-3/3', feel: '-1', wind: '3.0', humidity: '75' },
                { condition: 'rain', temp: '2/6', feel: '3', wind: '2.2', humidity: '80' },
                { condition: 'cloudy', temp: '0/7', feel: '4', wind: '1.5', humidity: '70' },
                { condition: 'sunny', temp: '3/10', feel: '6', wind: '1.0', humidity: '60' },
            ];
            
            // --- 【資訊頁狀態】 ---
            const currencyInput = ref(5000);
            const currencyRate = 0.215;
            const hotels = [
                { name: '札幌大倉飯店', date: '2/1 (1晚)', address: '北海道札幌市中央区南1条西5丁目', phone: '011-261-8000' },
                { name: '小樽運河前飯店', date: '2/2-2/3 (2晚)', address: '小樽市港町5-3', phone: '0134-21-2111' },
                { name: '洞爺湖畔亭', date: '2/4 (1晚)', address: '洞爺湖町洞爺湖温泉1-8', phone: '0142-75-2288' },
                { name: '札幌格拉斯麗', date: '2/5-2/6 (2晚)', address: '札幌市中央区北4条西4丁目1-1', phone: '011-209-5600' },
            ];

            // --- 【Modal 狀態】 ---
            const showShoppingModal = ref(false);
            const newShoppingItem = reactive({ name: '', image: null });

            const showExpenseModal = ref(false);
            const newExpense = reactive({ name: '', amount: null, date: dates[0].date, category: 'food', payment: 'cash' });
            
            const showItineraryModal = ref(false);
            const isEditMode = ref(false);
            const currentEditItem = reactive({ 
                id: null, 
                day: null, 
                name: '', 
                address: '', 
                startTime: '', 
                category: 'attraction',
                price: '',
                hours: '',
                note: '',
                transportType: 'car',
                travelTime: ''
            });


            // --- 【Computed Properties - 行程】 ---
            const currentItinerary = computed(() => {
                return plan.filter(item => item.day === selectedDateIndex.value + 1)
                           .sort((a, b) => {
                               // 根據 startTime 排序 (簡單的時間比較)
                               if (a.startTime && b.startTime) {
                                   return a.startTime.localeCompare(b.startTime);
                               }
                               // 沒有時間的放在後面
                               if (a.startTime) return -1;
                               if (b.startTime) return 1;
                               return 0;
                           });
            });

            // --- 【Computed Properties - 花費】 ---
            const totalExpensesJPY = computed(() => {
                return expenses.reduce((sum, exp) => sum + (exp.amount || 0), 0);
            });

            const totalExpensesTWD = computed(() => {
                return Math.round(totalExpensesJPY.value * currencyRate);
            });

            const currencyResult = computed(() => {
                if (!currencyInput.value || isNaN(currencyInput.value)) return '0';
                return formatNumber(Math.round(currencyInput.value * currencyRate));
            });

            // --- 【方法 - 工具】 ---
            function formatNumber(num) {
                if (num === null || num === undefined) return '0';
                return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            }
            
            function openMap(query) {
                const url = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`;
                window.open(url, '_blank');
            }

            function openMapDirections(startItem, endItem) {
                const start = startItem.address || startItem.name;
                const end = endItem.address || endItem.name;
                const url = `https://www.google.com/maps/dir/${encodeURIComponent(start)}/${encodeURIComponent(end)}`;
                window.open(url, '_blank');
            }

            function getCategoryColor(category) {
                switch (category) {
                    case 'attraction': return 'bg-ice-blue text-deep-sea-blue';
                    case 'food': return 'bg-red-400';
                    case 'shopping': return 'bg-yellow-500';
                    case 'stay': return 'bg-indigo-500';
                    case 'transport': return 'bg-green-500';
                    case 'ticket': return 'bg-pink-500';
                    case 'other': return 'bg-slate-500';
                    default: return 'bg-slate-400';
                }
            }

            function getCategoryIcon(category) {
                switch (category) {
                    case 'attraction': return 'fa-solid fa-camera';
                    case 'food': return 'fa-solid fa-utensils';
                    case 'shopping': return 'fa-solid fa-bag-shopping';
                    case 'stay': return 'fa-solid fa-hotel';
                    case 'transport': return 'fa-solid fa-road';
                    case 'ticket': return 'fa-solid fa-ticket';
                    default: return 'fa-solid fa-circle-info';
                }
            }
            
            function getCategoryLabel(category) {
                 switch (category) {
                    case 'food': return '飲食';
                    case 'shopping': return '購物';
                    case 'transport': return '交通';
                    case 'stay': return '住宿';
                    case 'ticket': return '門票';
                    case 'other': return '其他';
                    case 'attraction': return '景點';
                    default: return '未分類';
                }
            }

            function getTransportIcon(type) {
                switch (type) {
                    case 'car': return 'fa-solid fa-car';
                    case 'walk': return 'fa-solid fa-person-walking';
                    case 'train': return 'fa-solid fa-train';
                    case 'bus': return 'fa-solid fa-bus';
                    default: return 'fa-solid fa-circle';
                }
            }

            function getWeatherIcon(condition) {
                switch (condition) {
                    case 'sunny': return 'fa-solid fa-sun';
                    case 'cloudy': return 'fa-solid fa-cloud';
                    case 'rain': return 'fa-solid fa-cloud-showers-heavy';
                    case 'snow': return 'fa-solid fa-snowflake';
                    default: return 'fa-solid fa-question';
                }
            }

            function getWeatherDescription(condition) {
                switch (condition) {
                    case 'sunny': return '晴朗，注意防曬';
                    case 'cloudy': return '多雲，體感舒適';
                    case 'rain': return '有雨，攜帶雨具';
                    case 'snow': return '降雪，路面濕滑';
                    default: return '天氣資訊不明';
                }
            }

            // --- 【方法 - 行程】 ---
            
            function moveItinerary(id, direction) {
                const arr = plan.filter(item => item.day === selectedDateIndex.value + 1);
                const index = arr.findIndex(item => item.id === id);
                
                if (index === -1) return; // 找不到

                const targetIndex = index + direction;
                if (targetIndex < 0 || targetIndex >= arr.length) return; // 超出邊界

                // 在原 plan 陣列中找到這兩項的實際索引
                const item1Index = plan.findIndex(item => item.id === arr[index].id);
                const item2Index = plan.findIndex(item => item.id === arr[targetIndex].id);

                if (item1Index > -1 && item2Index > -1) {
                    // 交換它們在 plan 陣列中的位置
                    [plan[item1Index], plan[item2Index]] = [plan[item2Index], plan[item1Index]];
                    
                    // *** 儲存資料 ***
                    saveData(ITINERARY_KEY, plan);
                }
            }
            
            function moveItineraryUp(id) {
                moveItinerary(id, -1);
            }
            
            function moveItineraryDown(id) {
                moveItinerary(id, 1);
            }
            
            function resetCurrentEditItem() {
                Object.assign(currentEditItem, {
                    id: null, 
                    day: selectedDateIndex.value + 1, // 預設為當前選中的天數
                    name: '', 
                    address: '', 
                    startTime: '', 
                    category: 'attraction',
                    price: '',
                    hours: '',
                    note: '',
                    transportType: 'car',
                    travelTime: ''
                });
            }
            
            function editItem(item) {
                isEditMode.value = true;
                Object.assign(currentEditItem, item);
                // 打開行程編輯 Modal (由於您沒提供此 Modal，我假設您有一個 function 可以處理)
                // 這裡我們直接使用一個簡單的 prompt 讓您修改行程名稱
                const newName = prompt(`編輯行程: ${item.name}`, item.name);
                if (newName !== null) {
                    item.name = newName;
                    
                    // *** 儲存資料 ***
                    saveData(ITINERARY_KEY, plan);
                }
            }
            
            // 由於您沒有提供「新增行程」的 Modal，我將提供一個簡單的 AddItemToItinerary 函式供參考。
            // 您需要自己補上一個 `<div v-if="showItineraryModal">...</div>`
            function addItemToItinerary(newItemData) {
                // 尋找最大的 ID，確保 ID 唯一
                const maxId = plan.reduce((max, item) => Math.max(max, item.id), 0);
                
                const newItem = {
                    id: maxId + 1,
                    day: selectedDateIndex.value + 1,
                    isNoteExpanded: false,
                    ...newItemData,
                };
                
                plan.push(newItem);
                // 排序以讓新的項目能顯示在正確位置
                plan.sort((a, b) => {
                    if (a.day !== b.day) return a.day - b.day;
                    if (a.startTime && b.startTime) return a.startTime.localeCompare(b.startTime);
                    return 0;
                });
                
                // *** 儲存資料 ***
                saveData(ITINERARY_KEY, plan);
            }

            // --- 【方法 - 購物】 ---
            function handleImageUpload(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        newShoppingItem.image = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            }
            
            function addShoppingItem() {
                if (newShoppingItem.name.trim()) {
                    shoppingList.push({ 
                        name: newShoppingItem.name.trim(), 
                        image: newShoppingItem.image // Base64 String
                    });
                    
                    // 清空表單
                    newShoppingItem.name = '';
                    newShoppingItem.image = null;
                    showShoppingModal.value = false;
                    
                    // *** 儲存資料 ***
                    saveData(SHOPPING_KEY, shoppingList);
                }
            }

            function removeShoppingItem(index) {
                shoppingList.splice(index, 1);
                
                // *** 儲存資料 ***
                saveData(SHOPPING_KEY, shoppingList);
            }

            // --- 【方法 - 花費】 ---
            function addExpense() {
                if (newExpense.name.trim() && newExpense.amount > 0) {
                    expenses.unshift({ // unshift 讓最新的項目顯示在最上面
                        name: newExpense.name.trim(),
                        amount: newExpense.amount,
                        date: newExpense.date,
                        category: newExpense.category,
                        payment: newExpense.payment,
                    });
                    // 清空表單
                    Object.assign(newExpense, { 
                        name: '', 
                        amount: null, 
                        date: dates[0].date, 
                        category: 'food', 
                        payment: 'cash' 
                    });
                    showExpenseModal.value = false;
                    
                    // *** 儲存資料 ***
                    saveData(EXPENSES_KEY, expenses);
                }
            }
            
            function removeExpense(index) {
                expenses.splice(index, 1);
                
                // *** 儲存資料 ***
                saveData(EXPENSES_KEY, expenses);
            }


            // --- 【新增按鈕總控】 ---
            function handleAddClick() {
                if (currentTab.value === 'itinerary') {
                    // 由於沒有新增行程 Modal，這裡提供一個簡單的提示
                    const newName = prompt(`請輸入新增行程名稱 (本日: ${dates[selectedDateIndex.value].date})`);
                    if (newName) {
                        addItemToItinerary({ name: newName });
                    }
                } else if (currentTab.value === 'shopping') {
                    showShoppingModal.value = true;
                } else if (currentTab.value === 'expenses') {
                    // 預設日期為今天 (如果沒有更好的日期選擇器)
                    newExpense.date = dates[selectedDateIndex.value].date;
                    showExpenseModal.value = true;
                }
            }

            // --- 【App Setup 結束】 ---
            return {
                // 狀態
                currentTab,
                dates,
                selectedDateIndex,
                weatherData,
                currencyInput,
                currencyResult,
                hotels,
                plan,
                shoppingList,
                expenses,
                
                showShoppingModal,
                newShoppingItem,
                showExpenseModal,
                newExpense,
                
                // 計算屬性
                currentItinerary,
                totalExpensesJPY,
                totalExpensesTWD,
                
                // 方法
                formatNumber,
                getCategoryColor,
                getCategoryIcon,
                getTransportIcon,
                getWeatherIcon,
                getWeatherDescription,
                getCategoryLabel,
                
                openMap,
                openMapDirections,
                
                moveItineraryUp,
                moveItineraryDown,
                editItem,
                
                handleImageUpload,
                addShoppingItem,
                removeShoppingItem,
                
                addExpense,
                removeExpense,
                
                handleAddClick,
            };
        }
    };

    createApp(App).mount('#app');
</script>
    const { createApp, ref, computed, onMounted } = Vue

    createApp({
        setup() {
            // 匯率基準
            const EXCHANGE_RATE = 0.215;

            // 標籤顏色與圖示定義
            const CATEGORY_MAP = {
                sightseeing: { color: 'bg-green-500', icon: 'fa-solid fa-camera' },
                food: { color: 'bg-red-500', icon: 'fa-solid fa-utensils' },
                shopping: { color: 'bg-indigo-500', icon: 'fa-solid fa-bag-shopping' },
                accommodation: { color: 'bg-purple-500', icon: 'fa-solid fa-bed' },
                flight: { color: 'bg-blue-500', icon: 'fa-solid fa-plane-departure' },
                transport: { color: 'bg-orange-500', icon: 'fa-solid fa-car' },
                ticket: { color: 'bg-cyan-500', icon: 'fa-solid fa-ticket' },
                other: { color: 'bg-slate-500', icon: 'fa-solid fa-circle-info' },
                stay: { color: 'bg-purple-500', icon: 'fa-solid fa-hotel' }, 
            };
            const CATEGORY_LABEL_MAP = {
                sightseeing: '景點', food: '飲食', shopping: '購物', accommodation: '住宿', flight: '航班', transport: '交通', ticket: '門票', other: '其他', stay: '住宿'
            };

            // 當前頁面
            const currentTab = ref('itinerary');

            // --- 資料定義：已根據使用者最新行程全部更新 ---
            
            const dates = ref([
                { date: '2/1', weekday: '五', hasCar: false, tollFee: 0 },
                { date: '2/2', weekday: '六', hasCar: true, tollFee: 0 }, // 2/2 租車日開始
                { date: '2/3', weekday: '日', hasCar: true, tollFee: 0 },
                { date: '2/4', weekday: '一', hasCar: true, tollFee: 0 },
                { date: '2/5', weekday: '二', hasCar: true, tollFee: 0 },
                { date: '2/6', weekday: '三', hasCar: true, tollFee: 0 }, // 2/6 還車
                { date: '2/7', weekday: '四', hasCar: false, tollFee: 0 },
            ]);

            const hotels = ref([
                { name: '札幌大通東急STAY酒店', date: '2/1 - 2/3 (2晚)', phone: '+81-11-200-5109', address: '〒060-0042 北海道札幌市中央区大通西９丁目３−3' },
                { name: '富良野ホテル (Furano Hotel)', date: '2/3 (1晚)', phone: '+81-167-22-1133', address: '〒076-0035 北海道富良野市学田三区' },
                { name: '登別溫泉第一瀧本館', date: '2/4 - 2/6 (2晚)', phone: '+81-143-84-2111', address: '〒059-0551 北海道登別市登別温泉町５５' },
                { name: '札幌西三井花園飯店', date: '2/6 (1晚)', phone: '+81-11-280-5531', address: '〒060-0004 北海道札幌市中央区北４条西７丁目１−2' },
            ]);
            
            // 使用者的完整行程資料 (已根據最新的排程更新)
            const itineraryData = ref([
                // Day 1: 2/1 (日) 札幌市區遊
                [
                    { id: 101, name: '桃園機場報到', category: 'flight', startTime: '06:00', address: '桃園國際機場 (TPE)', note: '中華航空 CI0130 08:35起飛', hours: null, price: null, transportType: 'flight', travelTime: null, isNoteExpanded: false },
                    { id: 102, name: '新千歲機場 (CTS) 抵達', category: 'flight', startTime: '13:15', address: '新千歲機場', note: '領取行李與確認巴士站牌', hours: null, price: null, transportType: 'flight', travelTime: '4h40m', isNoteExpanded: false },
                    { id: 103, name: '搭乘機場巴士至札幌', category: 'transport', startTime: '~14:30', address: '札幌大通東急STAY酒店', note: '國內線14, 22站台搭車，分直達/全達，車程約60-80分鐘。', hours: null, price: '約 ¥1,400/人', transportType: 'bus', travelTime: '1h30m', isNoteExpanded: false },
                    { id: 104, name: '札幌大通東急STAY酒店 Check-in', category: 'accommodation', startTime: '~16:00', address: '札幌東急大通酒店', note: '完成住宿手續並稍作休息', hours: null, price: null, transportType: 'walk', travelTime: '10m', isNoteExpanded: false },
                    { id: 105, name: '晚餐 (湯咖哩)', category: 'food', startTime: '~17:00', address: 'Soup Curry GARAKU 或 奥芝商店 実家', note: '人氣：燉豬肉湯咖哩、嫩雞腿和蔬菜湯咖哩', hours: '17:00-20:30', price: null, transportType: 'walk', travelTime: '15m', isNoteExpanded: false },
                    { id: 106, name: '大通公園 & 札幌電視塔', category: 'sightseeing', startTime: '~19:00', address: '大通公園 & 札幌電視塔', note: '欣賞夜景，電視塔觀景台高 90.38m。冬季有燈飾。', hours: '9:00-22:00 (電視塔)', price: '觀景台門票', transportType: 'walk', travelTime: '5m', isNoteExpanded: false },
                    { id: 107, name: '貍小路商店街', category: 'shopping', startTime: '~20:30', address: '貍小路商店街 (4-5丁目)', note: '藥妝、伴手禮採購。', hours: null, price: null, transportType: 'walk', travelTime: '15m', isNoteExpanded: false },
                    { id: 108, name: '成吉思汗烤肉 (宵夜/晚餐)', category: 'food', startTime: '~21:30', address: '成吉思汗烤肉YUHI 薄野本店', note: '或是北海道ジンギスカンMASAJINすすきの本店', hours: '17:00–23:00/00:00', price: null, transportType: 'walk', travelTime: '15m', isNoteExpanded: false },
                    { id: 109, name: '業務超市', category: 'shopping', startTime: '~22:30', address: '業務スーパー (大通西17条店)', note: '大份量、價格實惠，採購零食或隔日早餐', hours: '9:00–22:00', price: null, transportType: 'walk', travelTime: '20m', isNoteExpanded: false },
                ],
                // Day 2: 2/2 (一) 小樽
                [
                    { id: 201, name: '札幌市區取車', category: 'transport', startTime: '08:00', address: 'Nissan Rent a Car 札幌駅南口アスティ店', note: '租車日開始！', hours: null, price: null, transportType: 'walk', travelTime: '20m', isNoteExpanded: false },
                    { id: 202, name: '小樽水族館', category: 'sightseeing', startTime: '09:00', address: '小樽水族館', note: '海獸樂園表演 (海豚/海獅) 11:00、企鵝散步 11:30 (冬季限定)。', hours: '9:00-16:00', price: '¥1,800/成人', transportType: 'car', travelTime: '55m', isNoteExpanded: false },
                    { id: 203, name: '小樽水族館企鵝散步', category: 'sightseeing', startTime: '11:30', address: '小樽水族館', note: '冬季限定，企鵝會在雪地上散步。', hours: null, price: null, transportType: 'walk', travelTime: '0m', isNoteExpanded: false },
                    { id: 204, name: '午餐 (三角市場)', category: 'food', startTime: '~12:45', address: '三角市場 (滝波食堂/惠比壽櫻)', note: '新鮮海鮮丼飯，近 JR 小樽車站。 (備選: cafe BAAL 牛排飯)', hours: '8:00-17:00', price: null, transportType: 'car', travelTime: '15m', isNoteExpanded: false },
                    { id: 205, name: '小樽堺町通り商店街', category: 'shopping', startTime: '~14:30', address: '小樽音樂盒堂本館/北一硝子/LeTAO總店', note: '北一硝子三號館煤油燈、蒸汽鐘報時、LeTAO雙層起司蛋糕。', hours: null, price: null, transportType: 'walk', travelTime: '10m', isNoteExpanded: false },
                    { id: 206, name: '天狗山纜車', category: 'sightseeing', startTime: '~16:30', address: '天狗山纜車', note: '觀賞小樽夜景的最佳地點 (北海道三大夜景之一)。約 15:00 上山', hours: '9:00-21:00', price: '¥1,800/成人', transportType: 'car', travelTime: '15m', isNoteExpanded: false },
                    { id: 207, name: '晚餐', category: 'food', startTime: '~19:00', address: '小樽運河周邊餐廳', note: '在小樽用餐後再開車回札幌', hours: null, price: null, transportType: 'car', travelTime: '15m', isNoteExpanded: false },
                    { id: 208, name: '返回札幌大通東急STAY酒店', category: 'accommodation', startTime: '~20:30', address: '札幌東急大通酒店', note: '休息準備隔日退房', hours: null, price: null, transportType: 'car', travelTime: '1h', isNoteExpanded: false },
                ],
                // Day 3: 2/3 (二) 旭川 & 美瑛 & 富良野
                [
                    { id: 301, name: '早餐 (Sandria三明治)', category: 'food', startTime: '08:00', address: 'Sandria三明治 (札幌市區)', note: '雙倍蛋沙拉、炸蝦三明治，外帶車上享用。', hours: '24小時', price: null, transportType: 'car', travelTime: '15m', isNoteExpanded: false },
                    { id: 302, name: '旭山動物園', category: 'sightseeing', startTime: '09:30', address: '旭山動物園', note: '冬季營業時間 10:30-15:30。必看冬季限定企鵝散步、北極熊館。', hours: '10:30-15:30 (冬季)', price: '¥1,000/成人', transportType: 'car', travelTime: '2h', isNoteExpanded: false },
                    { id: 303, name: '午餐', category: 'food', startTime: '~13:00', address: '山頭火拉麵 或 動物園內餐廳', note: '可在旭川市區或動物園附近用餐', hours: null, price: null, transportType: 'car', travelTime: '15m', isNoteExpanded: false },
                    { id: 304, name: '美瑛景點 (聖誕樹 & 白鬚瀑布)', category: 'sightseeing', startTime: '~15:00', address: '美瑛聖誕樹 & 白鬚瀑布', note: '欣賞美瑛著名的冬季雪景', hours: null, price: null, transportType: 'car', travelTime: '30m', isNoteExpanded: false },
                    { id: 305, name: '富良野 森林精靈露台', category: 'sightseeing', startTime: '~17:00', address: '森林精靈露台', note: '手工藝品小木屋，晚上點燈很美，免費入場。', hours: '10:00-20:45', price: '免費', transportType: 'car', travelTime: '1h', isNoteExpanded: false },
                    { id: 306, name: '晚餐', category: 'food', startTime: '~19:00', address: '富良野周邊餐廳', note: '富良野當地特色餐廳', hours: null, price: null, transportType: 'car', travelTime: '15m', isNoteExpanded: false },
                    { id: 307, name: 'COOP超市 & Seicomart', category: 'shopping', startTime: '~20:30', address: 'COOP超市 / Seicomart', note: 'Seicomart 的 Hot Chef 熟食和 Secoma 自有品牌。', hours: null, price: null, transportType: 'car', travelTime: '10m', isNoteExpanded: false },
                    { id: 308, name: '富良野ホテル Check-in', category: 'accommodation', startTime: '~21:30', address: '富良野ホテル (Furano Hotel)', note: '本日住宿：富良野', hours: null, price: null, transportType: 'car', travelTime: '10m', isNoteExpanded: false },
                ],
                // Day 4: 2/4 (三) 登別溫泉
                [
                    { id: 401, name: '白色戀人工廠', category: 'sightseeing', startTime: '09:00', address: '白い恋人パーク', note: '歐式庭園，參觀餅乾生產線，可 DIY 體驗。', hours: '10:00-19:00', price: '¥800/成人', transportType: 'car', travelTime: '2h30m', isNoteExpanded: false },
                    { id: 402, name: '午餐 (牛津巧克力酒廊)', category: 'food', startTime: '~12:00', address: '白色戀人工廠內', note: '或在前往下一個景點途中用餐', hours: null, price: null, transportType: 'walk', travelTime: '10m', isNoteExpanded: false },
                    { id: 403, name: '國營瀧野鈴蘭丘陵公園', category: 'sightseeing', startTime: '~14:00', address: '國営滝野すずらん公園', note: '冬季免費入園 (瀧野雪之世界)，玩雪、雪上橡皮艇。', hours: '9:00-17:00 (冬季免費)', price: '冬季免費', transportType: 'car', travelTime: '45m', isNoteExpanded: false },
                    { id: 404, name: '登別溫泉第一瀧本館 Check-in', category: 'accommodation', startTime: '~16:30', address: '登別溫泉第一瀧本館', note: '本日住宿：登別溫泉 (本日車程較長)', hours: null, price: null, transportType: 'car', travelTime: '1h20m', isNoteExpanded: false },
                    { id: 405, name: '晚餐 (旅館內)', category: 'food', startTime: '~18:00', address: '登別溫泉第一瀧本館', note: '享用溫泉旅館豐盛的晚餐', hours: null, price: null, transportType: 'walk', travelTime: '5m', isNoteExpanded: false },
                    { id: 406, name: '閻魔堂地獄審判', category: 'sightseeing', startTime: '~19:30', address: '閻魔堂', note: '溫泉街上的閻羅王變臉秀表演。', hours: null, price: null, transportType: 'walk', travelTime: '5m', isNoteExpanded: false },
                    { id: 407, name: '登別溫泉街', category: 'shopping', startTime: '~20:30', address: '登別溫泉街', note: '逛街、買伴手禮、免費足湯。', hours: null, price: null, transportType: 'walk', travelTime: '5m', isNoteExpanded: false },
                ],
                // Day 5: 2/5 (四) 登別
                [
                    { id: 501, name: '尼克斯海洋公園', category: 'sightseeing', startTime: '09:30', address: '登別尼克斯海洋公園', note: '歐洲城堡水族館、企鵝遊行、海豚海獅表演。', hours: '9:00-17:00', price: '¥3,000/成人', transportType: 'car', travelTime: '10m', isNoteExpanded: false },
                    { id: 502, name: '尼克斯海洋公園 企鵝遊行', category: 'sightseeing', startTime: '11:00', address: '登別尼克斯海洋公園', note: '企鵝會在園區內大搖大擺散步。', hours: null, price: null, transportType: 'walk', travelTime: '0m', isNoteExpanded: false },
                    { id: 503, name: '午餐', category: 'food', startTime: '~12:30', address: '尼克斯海洋公園內或登別溫泉街', note: '可選擇回到溫泉街用餐', hours: null, price: null, transportType: 'car', travelTime: '10m', isNoteExpanded: false },
                    { id: 504, name: '登別熊牧場', category: 'sightseeing', startTime: '~14:00', address: '登別熊牧場', note: '搭纜車上山，人之籠看熊，俱多樂湖展望台。', hours: '9:30-16:30', price: '¥3,000/成人 (含纜車)', transportType: 'car', travelTime: '10m', isNoteExpanded: false },
                    { id: 505, name: '登別地獄谷', category: 'sightseeing', startTime: '~16:00', address: '登別地獄谷', note: '壯麗地貌，爆裂火山口、鐵泉池間歇泉，免費參觀。', hours: '全天', price: '免費', transportType: 'car', travelTime: '5m', isNoteExpanded: false },
                    { id: 506, name: '晚餐 (旅館內) / 溫泉休息', category: 'food', startTime: '~18:00', address: '登別溫泉第一瀧本館', note: '本日繼續享受溫泉', hours: null, price: null, transportType: 'walk', travelTime: '5m', isNoteExpanded: false },
                    { id: 507, name: '鬼火之路', category: 'sightseeing', startTime: '~20:00', address: '登別地獄谷', note: '夜晚步道兩側點燈，營造奇幻氛圍', hours: null, price: '免費', transportType: 'walk', travelTime: '5m', isNoteExpanded: false },
                ],
                // Day 6: 2/6 (五) 札幌
                [
                    { id: 601, name: '羊之丘展望台', category: 'sightseeing', startTime: '09:00', address: 'さっぽろ羊ヶ丘展望台', note: '與克拉克博士雕像合影。冬季可玩雪。', hours: null, price: '¥1,000/成人', transportType: 'car', travelTime: '1h', isNoteExpanded: false },
                    { id: 602, name: '午餐 (羊之丘)', category: 'food', startTime: '~12:00', address: '羊之丘休息屋', note: '可品嚐成吉思汗烤肉或白色戀人冰淇淋。', hours: null, price: null, transportType: 'walk', travelTime: '0m', isNoteExpanded: false },
                    { id: 603, name: '三井OUTLET PARK 札幌北廣島', category: 'shopping', startTime: '~14:00', address: '三井アウトレットパーク 札幌北広島', note: '購物血拼。', hours: '10:00-20:00', price: null, transportType: 'car', travelTime: '30m', isNoteExpanded: false },
                    { id: 604, name: '歸還租車', category: 'transport', startTime: '~19:00', address: 'Nissan Rent a Car 札幌駅南口アスティ店', note: '本日晚上歸還租車。', hours: null, price: null, transportType: 'car', travelTime: '1h', isNoteExpanded: false },
                    { id: 605, name: '札幌西三井花園飯店 Check-in', category: 'accommodation', startTime: '~20:00', address: '札幌西三井花園飯店', note: '本日住宿：札幌', hours: null, price: null, transportType: 'walk', travelTime: '10m', isNoteExpanded: false },
                    { id: 606, name: '晚餐 (串鳥)', category: 'food', startTime: '~20:30', address: '串鳥 札幌駅北口店', note: '人氣餐點：雞肉串、豬肉串、豬五花蘆筍捲。', hours: '16:30–23:30', price: null, transportType: 'walk', travelTime: '5m', isNoteExpanded: false },
                ],
                // Day 7: 2/7 (六) 回家
                [
                    { id: 701, name: '早餐 (飯店/札幌車站周邊)', category: 'food', startTime: '08:00', address: '札幌車站周邊', note: '享用早餐', hours: null, price: null, transportType: 'walk', travelTime: '10m', isNoteExpanded: false },
                    { id: 702, name: '前往新千歲機場 (JR/巴士)', category: 'transport', startTime: '09:30', address: '新千歲機場', note: '搭乘 JR 或機場巴士，預計 11:30 報到。', hours: null, price: null, transportType: 'public', travelTime: '40m-1h', isNoteExpanded: false },
                    { id: 703, name: '機場報到/托運行李', category: 'flight', startTime: '11:30', address: '新千歲機場 (CTS)', note: '預計 11:30 報到', hours: null, price: null, transportType: 'walk', travelTime: '0m', isNoteExpanded: false },
                    { id: 704, name: '午餐 (一幻拉麵)', category: 'food', startTime: '~12:30', address: '一幻拉麵 (國內線航廈)', note: '推薦濃厚蝦湯頭搭配粗麵。', hours: '9:00-21:00', price: null, transportType: 'walk', travelTime: '10m', isNoteExpanded: false },
                    { id: 705, name: '機場購物/候機', category: 'shopping', startTime: '~13:30', address: '新千歲機場', note: '國內線航廈伴手禮店、多啦A夢樂園、Royce\' Chocolate World。', hours: null, price: null, transportType: 'walk', travelTime: '0m', isNoteExpanded: false },
                    { id: 706, name: '新千歲機場起飛 (CI0131)', category: 'flight', startTime: '14:30', address: '桃園國際機場 (TPE)', note: '預計 18:15 抵達桃園', hours: null, price: null, transportType: 'flight', travelTime: '3h45m', isNoteExpanded: false },
                ],
            ]);

            // 預設天氣資訊
            const weatherData = ref([
                { condition: 'snow', temp: '0/-5', feel: '-8' },
                { condition: 'snow', temp: '-1/-7', feel: '-10' },
                { condition: 'snow', temp: '-2/-10', feel: '-12' },
                { condition: 'snow', temp: '-3/-8', feel: '-11' },
                { condition: 'snow', temp: '1/-4', feel: '-6' },
                { condition: 'snow', temp: '2/-3', feel: '-5' },
                { condition: 'cloudy', temp: '3/-2', feel: '-3' },
            ]);
            
            // 購物清單 (範例資料)
            const shoppingList = ref([
                { name: '六花亭 奶油葡萄乾夾心餅乾', image: 'https://via.placeholder.com/100/f0f9ff/005e8a?text=Rokkatei' },
                { name: 'LeTAO 雙層起司蛋糕', image: 'https://via.placeholder.com/100/f0f9ff/005e8a?text=LeTAO' },
                { name: '薯條三兄弟', image: 'https://via.placeholder.com/100/f0f9ff/005e8a?text=JagaPockle' },
            ]);

            // 花費紀錄 (範例資料)
            const expenses = ref([
                { name: '機票費用', amount: 35000, category: 'flight', date: '2026-01-15', payment: 'card' },
                { name: '札幌湯咖哩', amount: 4500, category: 'food', date: '2026-03-06', payment: 'cash' },
                { name: '小樽水族館門票', amount: 3600, category: 'ticket', date: '2026-03-07', payment: 'card' },
                { name: '登別溫泉飯店', amount: 80000, category: 'stay', date: '2026-03-09', payment: 'card' },
            ]);

            // --- 狀態控制 ---
            const selectedDateIndex = ref(0);
            const showShoppingModal = ref(false);
            const showExpenseModal = ref(false);
            const showItineraryModal = ref(false);
            const isEditMode = ref(false); 
            
            // 新增/編輯行程狀態
            const newItinerary = ref({
                id: null, name: '', category: 'sightseeing', startTime: '', hours: '', address: '', price: '', note: '', transportType: 'car', travelTime: '', isNoteExpanded: false
            });
            // 新增購物狀態
            const newShoppingItem = ref({
                name: '', image: null
            });
            // 新增花費狀態
            const newExpense = ref({
                name: '', amount: null, category: 'food', date: new Date().toISOString().substring(0, 10), payment: 'cash'
            });

            // 貨幣轉換
            const currencyInput = ref(50000);
            const currencyResult = ref(0);
            
            // --- Computed Properties ---
            
            const currentItinerary = computed(() => {
                if (!itineraryData.value[selectedDateIndex.value]) {
                    itineraryData.value[selectedDateIndex.value] = [];
                }
                return itineraryData.value[selectedDateIndex.value];
            });

            const totalExpensesJPY = computed(() => {
                return expenses.value.reduce((sum, exp) => sum + exp.amount, 0);
            });

            const totalExpensesTWD = computed(() => {
                return Math.round(totalExpensesJPY.value * EXCHANGE_RATE);
            });

            // --- Methods ---

            const calculateCurrency = () => {
                currencyResult.value = Math.round(currencyInput.value * EXCHANGE_RATE);
            };

            const formatNumber = (num) => {
                if (num === 0 || num === null || num === undefined) return '0';
                return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            };

            // 取得顏色/圖示/描述
            const getCategoryColor = (category) => CATEGORY_MAP[category]?.color || CATEGORY_MAP.other.color;
            const getCategoryIcon = (category) => CATEGORY_MAP[category]?.icon || CATEGORY_MAP.other.icon;
            const getCategoryLabel = (category) => CATEGORY_LABEL_MAP[category] || '其他';
            const getWeatherIcon = (condition) => {
                const map = {
                    snow: 'fa-solid fa-snowflake',
                    sunny: 'fa-solid fa-sun',
                    cloudy: 'fa-solid fa-cloud',
                    rain: 'fa-solid fa-cloud-showers-heavy'
                };
                return map[condition] || 'fa-solid fa-cloud-question';
            };
            const getWeatherDescription = (condition) => {
                const map = {
                    snow: '大雪/降雪',
                    sunny: '晴朗',
                    cloudy: '多雲/陰天',
                    rain: '降雨'
                };
                return map[condition] || '天氣資訊未定';
            };
            const getTransportIcon = (type) => {
                const map = {
                    walk: 'fa-solid fa-shoe-prints',
                    car: 'fa-solid fa-car-side',
                    bus: 'fa-solid fa-bus-simple',
                    public: 'fa-solid fa-train-subway',
                    flight: 'fa-solid fa-plane',
                    other: 'fa-solid fa-solid fa-arrow-right-long'
                };
                return map[type] || 'fa-solid fa-arrow-right-long';
            };

            // 地圖功能
            const openMap = (query) => {
                if (query) {
                    // 使用 Google Maps 搜尋或導航
                    const url = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`;
                    window.open(url, '_blank');
                }
            };

            const openMapDirections = (startItem, endItem) => {
                const origin = startItem.address || startItem.name;
                const destination = endItem.address || endItem.name;
                
                if (origin && destination) {
                    const url = `https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(origin)}&destination=${encodeURIComponent(destination)}&travelmode=${endItem.transportType === 'car' ? 'driving' : 'transit'}`;
                    window.open(url, '_blank');
                } else {
                    alert('移動兩點間至少需要一個地點名稱或地址。');
                }
            };
            
            // 浮動按鈕點擊處理
            const handleAddClick = () => {
                if (currentTab.value === 'itinerary') {
                    resetItineraryForm();
                    showItineraryModal.value = true;
                } else if (currentTab.value === 'shopping') {
                    resetShoppingForm();
                    showShoppingModal.value = true;
                } else if (currentTab.value === 'expenses') {
                    resetExpenseForm();
                    showExpenseModal.value = true;
                }
            };
            
            // --- 行程管理 ---
            const resetItineraryForm = () => {
                isEditMode.value = false;
                newItinerary.value = {
                    id: Date.now(), name: '', category: 'sightseeing', startTime: '', hours: '', address: '', price: '', note: '', transportType: 'car', travelTime: '', isNoteExpanded: false
                };
            };

            const editItem = (item) => {
                isEditMode.value = true;
                // 深拷貝，防止直接修改原始資料
                newItinerary.value = JSON.parse(JSON.stringify(item)); 
                showItineraryModal.value = true;
            };

            const saveItineraryItem = () => {
                if (!newItinerary.value.name) {
                    alert('行程名稱不能為空');
                    return;
                }
                
                if (isEditMode.value) {
                    // 編輯模式：替換舊項目
                    const index = currentItinerary.value.findIndex(item => item.id === newItinerary.value.id);
                    if (index !== -1) {
                        currentItinerary.value[index] = { ...newItinerary.value };
                    }
                } else {
                    // 新增模式：推入新項目
                    const newItem = { ...newItinerary.value };
                    // 確保 ID 是最新的
                    newItem.id = Date.now();
                    itineraryData.value[selectedDateIndex.value].push(newItem);
                }
                
                // 重新賦值以確保 Vue 響應式更新
                itineraryData.value[selectedDateIndex.value] = [...currentItinerary.value];
                
                showItineraryModal.value = false;
                isEditMode.value = false;
            };
            
            // 刪除行程項目功能
            const removeItineraryItem = (id) => {
                if (confirm('確定要刪除這個行程嗎？此操作無法復原。')) {
                    const currentList = itineraryData.value[selectedDateIndex.value];
                    const index = currentList.findIndex(item => item.id === id);
                    
                    if (index !== -1) {
                        currentList.splice(index, 1);
                        // 重新賦值以確保 Vue 響應式更新
                        itineraryData.value[selectedDateIndex.value] = [...currentList];
                        showItineraryModal.value = false;
                        isEditMode.value = false;
                        alert('行程已刪除。');
                    }
                }
            };
            
            // 行程上下移動
            const moveItinerary = (id, direction) => {
                const currentList = currentItinerary.value;
                const index = currentList.findIndex(item => item.id === id);

                if (index === -1) return;

                const newIndex = index + direction;
                if (newIndex >= 0 && newIndex < currentList.length) {
                    // 執行交換
                    const item = currentList.splice(index, 1)[0];
                    currentList.splice(newIndex, 0, item);
                    // 重新賦值以確保 Vue 響應式更新
                    itineraryData.value[selectedDateIndex.value] = [...currentList];
                }
            };

            const moveItineraryUp = (id) => moveItinerary(id, -1);
            const moveItineraryDown = (id) => moveItinerary(id, 1);


            // --- 購物清單管理 ---
            const resetShoppingForm = () => {
                newShoppingItem.value = { name: '', image: null };
            };
            
            const handleImageUpload = (event) => {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        newShoppingItem.value.image = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            };

            const addShoppingItem = () => {
                if (newShoppingItem.value.name.trim() === '') {
                    alert('商品名稱不能為空！');
                    return;
                }
                shoppingList.value.push({ ...newShoppingItem.value });
                showShoppingModal.value = false;
                resetShoppingForm();
            };

            const removeShoppingItem = (index) => {
                shoppingList.value.splice(index, 1);
            };

            // --- 花費管理 ---
            const resetExpenseForm = () => {
                newExpense.value = { name: '', amount: null, category: 'food', date: new Date().toISOString().substring(0, 10), payment: 'cash' };
            };

            const addExpense = () => {
                if (newExpense.value.name.trim() === '' || newExpense.value.amount === null || newExpense.value.amount <= 0) {
                    alert('請輸入有效名稱和金額！');
                    return;
                }
                expenses.value.push({ ...newExpense.value });
                // 排序 (最新到最舊)
                expenses.value.sort((a, b) => new Date(b.date) - new Date(a.date)); 
                showExpenseModal.value = false;
                resetExpenseForm();
            };

            const removeExpense = (index) => {
                expenses.value.splice(index, 1);
            };


            // 載入時執行
            onMounted(() => {
                calculateCurrency();
                // 初始載入時將 expense 排序 (最新到最舊)
                expenses.value.sort((a, b) => new Date(b.date) - new Date(a.date));
            });

            return {
                currentTab, dates, selectedDateIndex, itineraryData, currentItinerary,
                hotels, shoppingList, expenses, totalExpensesJPY, totalExpensesTWD,
                weatherData, currencyInput, currencyResult, calculateCurrency,
                getCategoryColor, getCategoryIcon, getCategoryLabel, getWeatherIcon, getTransportIcon, getWeatherDescription,
                showShoppingModal, showExpenseModal, showItineraryModal, isEditMode,
                newShoppingItem, newExpense, newItinerary,
                handleAddClick, handleImageUpload, addShoppingItem, removeShoppingItem,
                addExpense, removeExpense, editItem, saveItineraryItem,
                removeItineraryItem, 
                moveItineraryUp, moveItineraryDown, 
                openMap, openMapDirections, formatNumber
            };
        }
    }).mount('#app');
</script>
</body>
</html>


